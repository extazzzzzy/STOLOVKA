# STOLOVKA
Веб-сервис доставки еды "STOLOVKA". 
## Описание
Сервис включает себя ролевую политику: менеджер, курьер, кухня, покупатель. У курьера и покупателя имеется личный профиль. У всех есть страница заказов. У покупателя есть страница с корзиной и каталогом. У менеджера есть страница добавления продукта, а также страница каталога с возможностью редактирования каждого продукта и ингредиентов к нему. Заказ возможен с 8:00 - 22:00 по МСК +2, изменить часовой пояс можно в файле making_in_order.php, переменная $timezone.

1) Менеджер. Менеджер может редактировать меню: добавлять новые позиции, редактировать и удалять существующие. Возможность установления любого статуса для заказа, кроме "Доставлен".  Менеджер видит абсолютно все заказы. Заказы, которые доставлены выделяются зелёным цветом. Заказы, с которыми у курьера возникли проблемы с покупателем выделяются красным. Заказы в работе - дефолтного цвета сайта.
2) Курьер. Курьер может принимать и видеть заказы только со статусом "В ожидании курьера", "На кухне", "В доставке", "Проблема с покупателем", "Доставлен". Видна следующая информация о заказе: статус, время к которому нужно доставить или "Как можно скорее", имя клиента, адрес, номер телефона клиента, заказанные блюда, сумма заказа и комментарий.
3) Кухня. Кухня может принимать и видеть заказы только со статусом "Принят". После подтверждения заказа кухней, его статус меняется на "На кухне". Кухня видит все позиции заказа и время доставки или "Как можно быстрее".
***КОГДА КУХНЯ СДЕЛАЛА ЗАКАЗ И ПОМЕНЯЛА СТАТУС НА "В ожидании курьера", КУРЬЕР МОЖЕТ ПРИНЯТЬ ЗАКАЗ, ПОСЛЕ ЧЕГО КУХНЯ ДОЛЖНА ПОДТВЕРДИТЬ ПРИНЯТИЕ И СТАТУС ЗАКАЗА ИЗМЕНЯЕТСЯ НА "В доставке".
4) Покупатель. Покупатель может добавить блюда из меню в корзину. Некоторые блюда можно будет модифицировать, добавлять или убирать ингридиенты. В корзине будет кнопка оформления заказа, после чего будет необходимо ввести адрес доставки, время доставки или "Как можно быстрее". После оформления покупатель сможет отслеживать статус своего заказа.

Существующие роли:
user - покупатель
manager - менеджер
cook - кухня
deliveryman - курьер

Пример работы: Покупатель регистрируется, входит в аккаунт, попадает на страницу профиля. В профиле покупатель видит приветствие и его личные данные, такие как: имя, номер телефона, адрес доставки. Имеются кнопки выхода с аккаунта, а также настройки. В настройках можно отредактировать дефолтный адрес доставки и имя, номер телефона изменить нельзя. В навигационной панели покупатель видит кнопки: Заказы, Каталог, Корзина. В заказах будут отображаться все заказы клиента. В каталоге покупатель сможет добавить блюда из меню в корзину. У некоторых блюд можно изменить ингредиенты. После добавления блюд в корзину, покупатель переходит во вкладку "Корзина", в которой будет отображаться информация о всех позициях заказа, ниже будет кнопка "Оформить заказ". При нажатии покупателя перекидывает на оформление заказа, где он может указать адрес доставки, выбрать время доставки, а также по желанию оставить какой-то комментарий. Изначально стоит адрес доставки, указанный пользователем при регистрации. После оформления заказа во вкладке "Заказы" пользователь сможет отслеживать статус своего заказа и другое. Далее заказ переходит в руки менеджера. Менеджер связывается с клиентом, подтверждает заказ и меняет статус заказа на "Принят". После этого в работе появляется кухня, при начале готовки заказа, кухня изменяет статус заказа на "На кухне", после чего у всех курьеров будет отображаться этот заказ. После готовности заказа, кухня меняет статус на "В ожидании курьера" и у курьеров появляется кнопка "Взять заказ". После нажатия этой кнопки одного из курьеров, у других курьеров этот заказ пропадает. Статус заказа становится "Утверждение курьера", кухня должна в этот момент нажать одну из кнопок: "Отдать заказ" или "Отклонить". Если кухня отдаёт заказ, то статус становится "В доставке", у покупателя появляется информация об имени курьера и его номере телефона. Если же кухня отклоняет заказ, то его статус обратно меняется на "В ожидании курьера" и заказ снова появляется у всех курьеров. Если у курьера при доставке возникли трудности с покупателем, то он может нажатием кнопки сообщить об это менеджеру, заказ у менеджера станет красным, статус заказа станет "Проблема с покупателем!". После решения проблемы курьер сможет сменить статус на "В доставке". После доставки заказа его статус становится "Доставлен" и выделяется зелёным цветом.

## Установка
1) Скачайте и установите MAMP для запуска локального сервера по ссылке: https://www.mamp.info/en/downloads/
2) Откройте PowerShell и укажите, куда бы вы хотели клонировать репозиторий. В случае с MAMP его необходимо клонировать по следующему пути: cd C:\MAMP\htdocs
3) Клонируйте репозиторий: git clone https://github.com/extazzzzzy/STOLOVKA.git
4) Скачайте необходимую базу данных по ссылке: https://cloud.mail.ru/public/eaFU/vgUbQdKQk
5) Запустите MAMP и после успешного запуска сервера нажмите "Open WebStart page". На странице найдите ссылку *phpMyAdmin* и перейдите по ней. В phpMyAdmin сверху нажмите "Import" и выберите ранее скачанную БД. После удачного импорта перейдите по следующему адресу и опробуйте веб-сервис: http://localhost/STOLOVKA/Pages/auth.php
